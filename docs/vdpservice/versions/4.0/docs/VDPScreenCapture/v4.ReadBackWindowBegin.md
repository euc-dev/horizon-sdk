---
layout: page
title: Horizon webRTC Redirection SDK
hide:
  #- navigation
  - toc
---
# `v4.ReadBackWindowBegin`
Starts tracking a remote window; e.g. a window on the remote desktop. This function is similar to v3.ReadBackWindowBegin() but it provides a way to include auxiliary windows along with the primary window. Auxilary windows are top level window that will be included with the readback image if they overlap the primary window.

The API requires some time to begin tracking a remote window. v3.ReadBackWindow() will return the error code VDP_SCREEN_CAPTURE_ERROR_READBACK_WINDOW_NOT_READY until it is ready to return images.

The callback VDPScreenCapture_Sink.v3.OnReadBackWindowReady() will be called when the API is ready to return images.

The callback VDPScreenCapture_Sink.v3.OnReadBackWindowDestroyed() will be called if the remote window is destroyed while being tracked.

The callback VDPScreenCapture_Sink.v3.OnReadBackWindowRemoteError() will be called if there is an error when setting up the tracking.

When finished, you must release the resources used to track the remote window by calling v3.ReadBackWindowEnd().

If there are multiple calls to v3/v4.ReadBackWindowBegin() to track the same window, each will return a different ReadBackWindow handle. Each handle will have to released by calling v3.ReadBackWindowEnd(). But the first call defines the parameters and the subsequent calls must provide the same parameters, including the list of auxiliary windows.

This function is a member of VDPScreenCapture_Interface.

## Method Signature
```
VDPScreenCapture_Error (*v4.ReadBackWindowBegin)(
    VDPScreenCapture_ContextId contextId,
    VDPScreenCapture_HWND hWnd,
    uint32 processId,
    VDPScreenCapture_HWND* hWndAux,
    uint32* processIdAux,
    int32 auxWindowCount,
    uint32 flags,
    VDPScreenCapture_ReadBackWindowHandle* phReadBackWindow
);
```

## Parameters
| Parameter | Description |
|-----------|-------------|
| contextId | The ID returned from VDPScreenCapture.v1.Init(). |
| hWnd | The Windows HWND of the remote window to track. |
| processId | The Windows process ID associated with the HWND. An error will be returned if the HWND does not belong to this process. |
| hWndAux | An array of Windows HWNDs to include with the readback image. These images will only be included with the readback image if they overlap the primary window. |
| processIdAux | An array of process IDs associated with the corresponding hWndAux. An error will be returned if the HWND does not belong to the corresponding process. |
| auxWindowCount | The count of auxiliary windows in the hWndAux array and process IDs in the processIdAux array. hWndAux and processIdAux may be NULL if auxWindowCount is 0. |
| flags | Options to apply to the read back. See VDP_SCREEN_CAPTURE_READBACK_BEGIN_* flags for more information. |
| phReadBackWindow | Returns a handle to be used with v3.ReadBackWindow() and v3.ReadBackWindowEnd(). This handle is also passed to the ReadBackWindow callbacks. |

## Return Values
| Value | Description |
|-------|-------------|
| VDP_SCREEN_CAPTURE_ERROR_SUCCESS | The tracking of the remote window is being initialized by asking the Horizon Agent to track the window. One of the sink functions will be called to notify you if setting up the tracking was successful or not. |
| VDP_SCREEN_CAPTURE_ERROR_INVALID_PARAMETER | contextId is invalid, hWnd is 0, processId is 0 , hWndAux/auxWindowCount is NULL (and auxWindowCount > 0), or phReadBackWindow is NULL. |
| VDP_SCREEN_CAPTURE_ERROR_UNSUPPORTED_PROTOCOL | The ReadBackWindow interface requires the Blast protocol. Attempts to use the interface with other protocols will fail. |
| VDP_SCREEN_CAPTURE_ERROR_UNSUPPORTED_AGENT | The version of the Horizon Agent running on the remote desktop does not support the ReadbackWindow interface. |
| VDP_SCREEN_CAPTURE_ERROR_UNSUPPORTED_OPTION | One of the options in the flags parameter is not supported or auxiliary windows are not supported. |
| VDP_SCREEN_CAPTURE_ERROR_HOST_ERROR | There was an error in setting up the tracking of the remote window. |

