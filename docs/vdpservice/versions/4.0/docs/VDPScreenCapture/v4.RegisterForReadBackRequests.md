---
layout: page
title: Horizon webRTC Redirection SDK
hide:
  #- navigation
  - toc
---
# `v4.RegisterForReadBackRequests`
Registers for screen and window read back requests. When v2.ReadBackScreen() or v3.ReadBackWindow() is called the Screen Capture API will issue a callback where an image can be provided so that it is included in the read back image.

VDPScreenCapture_Sink.v4.OnReadBackRequest() will be invoked when a read back of a screen or window is being done. The callback can then provide an image to be included in the read back image returned by calling v4.ReadBackRequestUpdate().

Each registration can provide an image for a single area of the screen. If you have multiple areas of the screen that need to be updated then you will need to register for multiple callbacks. This applies even if there are multiple areas associated with the same window; in this case that window would have to be registered multiple times.

This function is a member of VDPScreenCapture_Interface.

## Method Signature
```
VDPScreenCapture_Error (*v4.RegisterForReadBackRequests)(
    VDPScreenCapture_ContextId contextId,
    VDPScreenCapture_HWND hWnd,
    VDPScreenCapture_ReadBackRequestId* pReadBackRequestId
);
```

## Parameters
| Parameter | Description |
|-----------|-------------|
| contextId | The ID returned from VDPScreenCapture.v1.Init(). |
| hWnd | The Windows HWND of a window on the remote desktop. If set to NULL then you will only receive callbacks when v2.ReadBackScreen() is called. If set to non-NULL you will receive callbacks for v2.ReadBackScreen() as well as calls to v3.ReadBackWindow() with a matching window handle. |
| pReadBackRequestId | Returns an ID to be used with v4.CaptureRequestUpdate() and v4.UnregisterForReadBackRequests(). This ID is also passed to the VDPScreenCapture_Sink.v4.OnReadBackRequest() callback. |

## Return Values
| Value | Description |
|-------|-------------|
| VDP_SCREEN_CAPTURE_ERROR_SUCCESS | The window is registered for callbacks. |
| VDP_SCREEN_CAPTURE_ERROR_INVALID_PARAMETER | contextId is invalid or pReadBackRequestId is NULL. |
| VDP_SCREEN_CAPTURE_ERROR_HOST_ERROR | There was an error registering the window. |

