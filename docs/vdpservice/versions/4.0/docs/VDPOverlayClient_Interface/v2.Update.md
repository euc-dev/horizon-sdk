# v2.Update

Updates the overlay with a new image. The updated image is displayed when the next frame is drawn.

This function is a member of `VDPOverlayClient_Interface`.

## Method Signature
```
VDPOverlay_Error (*v2.Update)(VDPOverlayClient_ContextId contextId, VDPOverlay_WindowId windowId, void* pImage, int32 width, int32 height, int32 pitch, VDPOverlay_ImageFormat format, uint32 flags);
```

## Parameters

| Parameter | Description |
| --------- | ----------- |
| contextId | The ID returned from `VDPOverlayClient.v1.Init()`. |
| windowId | Window ID that was received from a previous `OnWindowRegistered()` event. |
| pImage | A pointer to the RGBX pixels to copy to the overlay. <br>
- If the VDP_OVERLAY_UPDATE_FLAG_SHARED_SURFACE flag is set pImage is the handle of a DirectX shared surface. <br>
- If the format is a YUV format then pImage must point to a VDPOverlayClient_YUVImageData structure. |
| width | Width, in pixels, of the image pointed to by pImage. If the width of the image does not match the width of the overlay, the given image is drawn according the layout mode of the overlay. |
| height | Height, in pixels, of the image pointed to by pImage. If the height of the image does not match the height of overlay, the given image is drawn according the layout mode of the overlay. |
| pitch	| Number of bytes that a single row of the image occupies. In the normal case, for BGRX images, this value is width multiplied by 4. |
| format | The pixel format of the image. This is one of the values in VDPOverlay_ImageFormat. |
| flags	| Determines whether to make a copy of the image data and/or pass a shared surface instead of a pointer to the image. See the next section for detailed information. |

## flags Values

The flags parameter can take the following allowed values.

### VDP_OVERLAY_UPDATE_FLAG_NONE 

Placeholder denoting that no flags are being passed.

### VDP_OVERLAY_UPDATE_FLAG_COPY_IMAGE 

If set, a copy of the image data is made. If `FALSE`, no copy is made and the image data must remain valid until another call to VDPOverlayClient_Interface.v1/v2.Update() is made.

### VDP_OVERLAY_UPDATE_FLAG_SHARED_SURFACE 

Allows a DirectX surface handle to be passed in place of a pointer to the image. Shared surfaces are not supported on all video cards or with all image formats, so the application must be prepared to fall back to not using this flag and passing a pointer to the image in system memory.

### VDP_OVERLAY_UPDATE_FLAG_EXCLUDE_FROM_READ_BACK

The overlay is not included as part of image returned from `VDPScreenCapture_Interface.v1.ReadBackScreen()`. 

### VDP_OVERLAY_UPDATE_FLAG_WRITE_IMAGE_FILE

If set the image is written to %TEMP%\Overlay<id>-<frame#>.png. This can be used when debugging to verify the image given to VDPOverlayClient_Interface.v1/v2.Update().

## Return Values

| Value | Description |
| ----- | ----------- |
| VDP_OVERLAY_ERROR_SUCCESS | Image was updated. |
| VDP_OVERLAY_ERROR_NOT_INITIALIZED	| Overlay API was not initialized. |
| VDP_OVERLAY_ERROR_INVALID_PARAMETER | The contextId, windowID, or pImage parameter was invalid. |


